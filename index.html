<!DOCTYPE html>
<html>
<head>
  <!-- META -->
  <title>Aftership NODE API Test</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="" />
  <!-- CSS -->
</head>
<body>
  <main>
    <section>
      <form id="trackingNumberForm" action="/trackshipment" method="POST">
        <label for="trackingNumber">Tracking Number</label>
        <input id="trackingNumber" name="trackingNumber" type="text submit" required />
        <button type="submit">Submit</button>
      </form>
      <div id="shippingInfo">
      </div>
    </section>
  </main>
  <!-- Javascript -->
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"></script>
  <!-- <script type="text/javascript" src="./js/shipping-info.js"></script> -->
  <script type="text/javascript">
  $(function () {
    var $trackingNumberForm = $('#trackingNumberForm');
    var $shippingInfo = $('#shippingInfo');
    var shippingDataOutput = '';
    var itemNum = 1;
  
    $trackingNumberForm.submit(function (e) {
      e.preventDefault();
      var $form = $(this);
      var $formData = $form.serialize();
      var $url = $form.attr('action');
  
        // alert($formData);
      $.post($url, $formData)
      .done(function (data) {
        // console.log(data.data.page);
        for (var key in data.data) {
          for (var key2 in data.data[key]) {
            // console.log(data.data[key][key2]);
            for (var key3 in data.data[key][key2]) {
              // console.log(data.data[key][key2][key3]);
              for (var key4 in data.data[key][key2][key3]) {
                if (typeof data.data[key][key2][key3][key4] === 'object') {
                  // console.log(data.data[key][key2][key3][key4]);
                  shippingDataOutput += '<h2>Item Number: ' + itemNum + '</h2><ul><li>Carrier: ' + data.data[key][key2][key3][key4].slug + '</li><li>Location: ' + data.data[key][key2][key3][key4].location + '</li><li>Status: ' + data.data  [key][key2][key3][key4].message + '</li></ul>';
                  itemNum += 1;
                };
              }
            }
            // console.log(shippingDataOutput);
            $shippingInfo.html(shippingDataOutput);
          }
        }
      })
    })
  })
  </script>
</body>
</html>
